<html><body>
<div class="camera"><video id="video">Video stream not available.</video></div>
<br/>Canvas6
  <br/>
<canvas id="canvas"></canvas>
<script type="text/javascript">
  var width = 320;
  var height = 0;
  var streaming = false;
  var canvas = document.getElementById("canvas");
  var ctx = canvas.getContext('2d');
  navigator.mediaDevices.getUserMedia({video: true, audio: false})
        .then(function (stream) {
            video.srcObject = stream;
            video.play();
        })
        .catch(function (err) {
            console.log("An error occured! " + err);
        });

video.addEventListener('canplay', function (ev) {
    if (!streaming) {
        height = video.videoHeight / (video.videoWidth / width);
        video.setAttribute('width', width);
        video.setAttribute('height', height);
        canvas.setAttribute('width', width);
        canvas.setAttribute('height', height);
        streaming = true;
    }
}, false);

clearphoto();

function clearphoto() {
    var context = canvas.getContext('2d');
    context.setTransform(1, 0, 0, 1, 0, 0);  
    context.rotate(90 * Math.PI / 180);
    context.fillStyle = "#AAA";
    context.fillRect(0, 0, canvas.width, canvas.height);
}
  
  function updateCanvas() {
    ctx.setTransform(1, 0, 0, 1, 0, 0);
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.translate(canvas.width * 0.5, canvas.height * 0.5);
    ctx.rotate(90 * Math.PI / 180);
    //ctx.scale(zoom, zoom);
    ctx.translate(-canvas.width * 0.5, -canvas.height * 0.5);
}
//https://stackoverflow.com/questions/18475262/how-to-zoom-and-rotate-webcam-video-which-is-streamed-by-html5-getusermedia-api

  function rotatecam(){
//  var c = document.getElementById("canvas");
//var ctx = c.getContext("2d");
ctx.rotate(20 * Math.PI / 180);
ctx.fillRect(50, 20, 100, 50);
  }
</script>
  
</body>
</html>
